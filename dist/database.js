"use strict";var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var A=(n,e)=>{for(var t in e)i(n,t,{get:e[t],enumerable:!0})},d=(n,e,t,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of v(e))!u.call(n,o)&&o!==t&&i(n,o,{get:()=>e[o],enumerable:!(c=p(e,o))||c.enumerable});return n};var E=n=>d(i({},"__esModule",{value:!0}),n);var _={};A(_,{config:()=>l,knex:()=>D});module.exports=E(_);var f=require("knex");var s=require("dotenv"),r=require("zod");process.env.NODE_ENV==="test"?(0,s.config)({path:".env.test"}):(0,s.config)();var x=r.z.object({NODE_ENV:r.z.enum(["development","production","test"]).default("production"),DATABASE_URL:r.z.string(),PORT:r.z.number().default(3333)}),a=x.safeParse(process.env);if(a.success===!1)throw console.error("\u{1F440} invalid enviroment variable ",a.error.format()),new Error("invalid enviroment variable");var m=a.data;if(!process.env.DATABASE_URL)throw new Error("DATABASE_URL is required");var l={client:"sqlite",connection:{filename:m.DATABASE_URL},useNullAsDefault:!0,migrations:{extension:"ts",directory:"./db/migrations"}},D=(0,f.knex)(l);0&&(module.exports={config,knex});
